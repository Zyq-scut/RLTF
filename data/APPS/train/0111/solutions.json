["#!/usr/bin/env python\n# coding:utf-8\n# Copyright (C) dirlt\n\nfrom sys import stdin\n\n\ndef run(n, m, pixels):\n    ans = 1 << 30\n\n    acc = [[0] * (m + 1) for _ in range(n + 1)]\n    for i in range(n):\n        for j in range(m):\n            acc[i + 1][j + 1] = acc[i + 1][j] + int(pixels[i][j])\n        for j in range(m):\n            acc[i + 1][j + 1] += acc[i][j + 1]\n    # print(acc)\n\n    for k in range(2, max(n, m) + 1):\n        r, c = (n + k - 1) // k, (m + k - 1) // k\n        res = 0\n        for i in range(r):\n            for j in range(c):\n                x, y = i * k, j * k\n                x2, y2 = min(x + k - 1, n - 1), min(y + k - 1, m - 1)\n                zero = acc[x2 + 1][y2 + 1] - acc[x][y2 + 1] - acc[x2 + 1][y] + acc[x][y]\n                # print(x, y, k, zero, k * k - zero)\n                res += min(zero, k * k - zero)\n        # print(k, res)\n        ans = min(ans, res)\n    print(ans)\n\n\ndef main():\n    n, m = [int(x) for x in stdin.readline().split()]\n    pixels = []\n    for i in range(n):\n        pixels.append(stdin.readline().strip())\n    run(n, m, pixels)\n\n\ndef __starting_point():\n    import os\n\n    if os.path.exists('tmp.in'):\n        stdin = open('tmp.in')\n    main()\n\n__starting_point()"]